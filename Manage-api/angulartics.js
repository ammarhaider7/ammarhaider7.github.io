!function(a,t){"use strict";var e=window.angulartics||(window.angulartics={});e.waitForVendorCount=0,e.waitForVendorApi=function(a,t,r,n,i){i||e.waitForVendorCount++,n||(n=r,r=void 0),!Object.prototype.hasOwnProperty.call(window,a)||void 0!==r&&void 0===window[a][r]?setTimeout(function(){e.waitForVendorApi(a,t,r,n,!0)},t):(e.waitForVendorCount--,n(window[a]))},a.module("angulartics",[]).provider("$analytics",function(){var t={pageTracking:{autoTrackFirstPage:!0,autoTrackVirtualPages:!0,trackRelativePath:!1,autoBasePath:!1,basePath:""},eventTracking:{},bufferFlushDelay:1e3},r=["pageTrackAdobe","pageTrack","eventTrackAdobe","eventTrack","setUsername","setUserProperties","setUserPropertiesOnce","setSuperProperties","setSuperPropertiesOnce"],n={},i={},s=function(a){return function(){e.waitForVendorCount&&(n[a]||(n[a]=[]),n[a].push(arguments))}},o=function(t,e){return i[t]||(i[t]=[]),i[t].push(e),function(){var e=arguments;a.forEach(i[t],function(a){a.apply(this,e)},this)}},c={settings:t},u=function(a,t){t?setTimeout(a,t):a()},g={$get:function(){return c},api:c,settings:t,virtualPageviews:function(a){this.settings.pageTracking.autoTrackVirtualPages=a},firstPageview:function(a){this.settings.pageTracking.autoTrackFirstPage=a},withBase:function(t){this.settings.pageTracking.basePath=t?a.element("base").attr("href").slice(0,-1):""},withAutoBase:function(a){this.settings.pageTracking.autoBasePath=a}},p=function(e,r){c[e]=o(e,r);var i=t[e],s=i?i.bufferFlushDelay:null,g=null!==s?s:t.bufferFlushDelay;a.forEach(n[e],function(a,t){u(function(){r.apply(this,a)},t*g)})},f=function(a){return a.replace(/^./,function(a){return a.toUpperCase()})},l=function(a){var t="register"+f(a);g[t]=function(t){p(a,t)},c[a]=o(a,s(a))};return a.forEach(r,l),g}).run(["$rootScope","$location","$window","$analytics","$injector",function(a,t,e,r,n){if(r.settings.pageTracking.autoTrackFirstPage){var i=!0;if(n.has("$route")){var s=n.get("$route");for(var o in s.routes){i=!1;break}}else if(n.has("$state")){var c=n.get("$state");for(var u in c.states){i=!1;break}}else i=!1;if(i)if(r.settings.pageTracking.autoBasePath&&(r.settings.pageTracking.basePath=e.location.pathname),r.settings.trackRelativePath){var g=r.settings.pageTracking.basePath+t.url();r.pageTrack(g),r.pageTrackAdobe(g)}else r.pageTrack(t.absUrl()),r.pageTrackAdobe(t.absUrl())}r.settings.pageTracking.autoTrackVirtualPages&&(r.settings.pageTracking.autoBasePath&&(r.settings.pageTracking.basePath=e.location.pathname+"#"),n.has("$route")&&a.$on("$routeChangeSuccess",function(a,e){if(!e||!(e.$$route||e).redirectTo){var n=r.settings.pageTracking.basePath+t.url();r.pageTrack(n),r.pageTrackAdobe(n)}}),n.has("$state")&&a.$on("$stateChangeSuccess",function(a,e){var n=r.settings.pageTracking.basePath+t.url();r.pageTrack(n),r.pageTrackAdobe(n)}))}])}(angular);
