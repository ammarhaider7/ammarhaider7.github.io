(function($) {
  Realtime.api = {
    env:   {},
    wsse:  new Wsse(),

    /** Make the api request */
    /* callback should follow standard jQuery request format:
     *    function callback(data)
     */
    ajax: function (params) {
        var headers = Realtime.api.wsse.generateAuth(Realtime.config.username, Realtime.config.secret);
        var url = 'https://'+Realtime.config.endpoint+'/admin/1.4/rest/?method='+ Realtime.config.method;
        $.ajax(url, {
            type:'POST',
            data: params,
            dataType: "json",
            headers: {
                'X-WSSE': headers['X-WSSE']
            }
        });
    },
    params: function(metric, element, dateFrom, top, search, dateGranularity) {
        // console.log(arguments);
        if (top == null) {
          top = 10;
        }       
        if (dateFrom == null) {
          dateFrom = "-12 hours";
        }
        if (search == null) {
          search = {};
        }
        if (dateGranularity == null) {
          dateGranularity = 'minute:12';
        }
        return {
          'reportDescription': {
            'source': 'realtime',
            'reportSuiteID': Realtime.config.reportSuite,
            'metrics': [
              {
                'id': metric
              }
            ],
            'elements': [
              {
                'id': element,
                'top': top,
                'search': search
              }
            ],
            'dateGranularity': dateGranularity,
            'dateFrom': dateFrom
          }
        };
    }
  }
})(jQuery);

Realtime.channelList = [{
		channel: "paidSearch",
		name: "Paid Search",
		value: 0
	},	{
		channel: "programmaticsDisplay",
		name: "Programmatic Display",
		value: 0
	},	{
		channel: "acqEmail",
		name: "Acquisition Email",
		value: 0
	},	{
		channel: "b2bExperianMemb",
		name: "B2B/Exp Membership",
		value: 0
	},	{
		channel: "partnership",
		name: "Partnership & Affiliates",
		value: 0
	},	{
		channel: "portalDisplay",
		name: "Portal Display",
		value: 0
	},	{
		channel: "customerMarketing",
		name: "Customer Marketing",
		value: 0
	},	{
		channel: "direct",
		name: "Direct",
		value: 0
	},	{
		channel: "naturalSearch",
		name: "Natural Search",
		value: 0
	},	{
		channel: "social",
		name: "Social",
		value: 0
	},	{
		channel: "Other",
		name: "Other",
		value: 0
	},	{
		channel: "reactEmail",
		name: "Reactivation Email",
		value: 0
	}	
];  

// Generated by CoffeeScript 1.9.3
Realtime.referringDomains = {
  social: ["www.facebook.com", "www.linkedin.com", "www.twitter.com", "plus.google.com", "www.orkut.com", "www.friendster.com", "livejournal.com", "blogspot.com", "wordpress.com", "friendfeed.com", "myspace.com", "digg.com", "www.reddit.com", "stumbleupon.com", "twine.com", "yelp.com", "mixx.com", "delicious.com", "tumblr.com", "disqus.com", "intensedebate.com", "plurk.com", "slideshare.net", "backtype.com", "netvibes.com", "mister-wong.com", "diigo.com", "flixster.com", "youtube.com", "vimeo.com", "12seconds.tv", "zooomr.com", "identi.ca", "jaiku.com", "flickr.com", "imeem.com", "dailymotion.com", "photobucket.com", "fotolog.com", "smugmug.com", "classmates.com", "myyearbook.com", "mylife.com", "tagged.com", "brightkite.com", "ning.com", "bebo.com", "hi5.com", "yuku.com", "cafemom.com", "xanga.com", "t.co"],
  // paidSearch: ["www.googleadservices.com"],
  naturalSearch: ["www.google.co.uk"]
};

// Generated by CoffeeScript 1.9.3
Realtime.sourcecodes = {
  paidSearch: [410004, 410005, 410006, 410007, 410008, 410009, 410010, 410565, 410723, 701156, 701249, 701250, 701251, 701252, 701272, 701328, 701329, 701371, 701372, 701373, 701584, 701604, 701608, 701609, 701610, 701614, 701626, 701627, 701628, 701646, 701647, 701648, 701661, 701664, 701669, 701678, 701679, 701680, 701682, 701684, 701685, 701686, 701687, 701688, 701689, 701690, 701691, 701692, 701693, 701731, 701744, 701749, 701751, 701766, 701767, 701768, 701786, 701789, 701790, 701836, 701844],
  programmaticsDisplay: [701625, 701765, 701842, 701843],
  acqEmail: [310030, 310031, 310167, 310180, 310481, 310483, 310487, 310550, 410023, 410030, 410031, 410047, 410051, 410060, 410061, 410064, 410065, 410066, 410068, 410069, 410072, 410083, 410107, 410108, 410109, 410110, 410120, 410137, 410142, 410146, 410151, 410157, 410159, 410164, 410167, 410168, 410173, 410176, 410180, 410189, 410266, 410464, 410465, 410475, 410477, 410478, 410481, 410482, 410483, 410484, 410487, 410489, 410494, 410501, 410528, 410529, 410548, 410550, 410557, 410578, 410580, 410583, 410584, 410585, 410586, 410587, 410588, 410589, 410590, 410591, 410592, 410593, 410594, 410595, 410596, 410597, 410598, 410599, 410600, 410601, 410602, 410603, 410604, 410605, 410606, 410607, 410608, 410609, 410610, 410611, 410612, 410613, 410664, 410676, 410681, 410691, 410692, 410693, 410694, 410700, 410701, 410702, 410703, 410704, 410705, 410706, 410707, 410708, 410709, 410710, 410721, 410726, 410728, 410729, 410734, 410735, 410736, 410737, 410738, 410739, 410740, 410741, 410742, 410743, 410744, 410800, 410801, 410802, 410803, 410805, 410808, 410809, 410827, 410828, 410829, 410854, 410855, 410856, 410857, 410858, 410859, 410860, 410861, 410862, 410863, 410864, 410865, 410866, 510030, 510031, 510167, 510180, 510481, 510483, 510487, 510550, 610030, 610031, 610167, 610180, 610481, 610483, 610487, 610550, 701158, 701265, 701282, 701283, 701284, 701285, 701290, 701291, 701292, 701293, 701318, 701321, 701322, 701323, 701324, 701333, 701356, 701359, 701363, 701364, 701365, 701366, 701367, 701374, 701376, 701377, 701378, 701379, 701380, 701402, 701543, 701544, 701545, 701576, 701613, 701615, 701616, 701617, 701618, 701619, 701620, 701621, 701622, 701623, 701821, 701822, 701829, 701830, 701831, 701832, 701833, 701834, 701835],
  reactEmail: [701823, 701824, 701825, 701826, 701827, 701828, 701852, 701853, 701854, 701855, 701856],
  b2bExperianMemb: [393619, 394619, 395619, 396619, 397619, 398619, 399619, 400619, 401619, 402619, 403619, 404619, 405619, 406619, 408619, 409619, 410077, 410179, 410182, 410260, 410261, 410490, 410491, 410493, 410527, 410530, 410538, 410539, 410540, 410577, 410614, 410660, 410663, 410674, 410759, 410760, 410761, 410843, 410845, 410908, 411619, 482619, 490641, 501307, 600108, 600109, 600202, 600203, 600209, 600210, 600211, 600212, 600213, 600215, 600216, 600217, 600219, 600222, 600223, 600224, 636001, 701219, 701266, 701298, 701302, 701304, 701305, 701307, 701308, 701309, 701310, 701311, 701312, 701313, 701315, 701316, 701317, 701399, 701418, 701638, 701695, 702100, 702101, 702102, 702103, 900622, 901622, 902622, 905622, 906622, 907622, 908622, 910622, 911622, 913622, 914622, 2832586, 3036674],
  partnership: [404200, 404800, 407800, 407900, 409913, 410014, 410017, 410018, 410019, 410020, 410024, 410025, 410026, 410033, 410034, 410037, 410038, 410041, 410042, 410043, 410052, 410067, 410080, 410081, 410082, 410086, 410088, 410091, 410094, 410104, 410105, 410106, 410111, 410115, 410118, 410122, 410123, 410125, 410129, 410139, 410145, 410152, 410162, 410170, 410178, 410199, 410267, 410268, 410271, 410276, 410463, 410492, 410498, 410500, 410506, 410507, 410508, 410509, 410510, 410511, 410512, 410513, 410514, 410515, 410516, 410517, 410518, 410519, 410520, 410521, 410522, 410523, 410524, 410525, 410526, 410555, 410559, 410566, 410659, 410662, 410675, 410680, 410682, 410683, 410684, 410719, 410720, 410725, 410727, 410731, 410745, 410746, 410748, 410749, 410750, 410755, 410756, 410772, 410791, 410811, 410812, 410813, 410833, 410835, 410837, 410838, 410839, 410844, 410853, 410909, 410936, 432619, 493622, 600124, 600225, 636003, 636004, 701154, 701155, 701161, 701169, 701190, 701198, 701199, 701200, 701201, 701203, 701204, 701205, 701206, 701207, 701208, 701209, 701210, 701211, 701212, 701213, 701233, 701234, 701235, 701248, 701264, 701273, 701277, 701286, 701287, 701288, 701289, 701299, 701300, 701301, 701303, 701306, 701314, 701319, 701320, 701330, 701331, 701334, 701335, 701336, 701337, 701338, 701339, 701340, 701341, 701342, 701343, 701344, 701345, 701346, 701347, 701348, 701349, 701350, 701351, 701352, 701353, 701354, 701355, 701360, 701370, 701403, 701415, 701416, 701417, 701420, 701421, 701422, 701423, 701424, 701425, 701426, 701427, 701428, 701429, 701430, 701431, 701432, 701433, 701434, 701435, 701436, 701437, 701438, 701439, 701440, 701441, 701442, 701443, 701444, 701445, 701446, 701447, 701448, 701449, 701450, 701451, 701452, 701453, 701454, 701455, 701456, 701457, 701458, 701459, 701460, 701461, 701462, 701463, 701464, 701465, 701466, 701467, 701468, 701469, 701470, 701471, 701472, 701473, 701474, 701475, 701476, 701477, 701478, 701479, 701480, 701481, 701482, 701483, 701484, 701485, 701486, 701487, 701488, 701489, 701490, 701491, 701492, 701493, 701494, 701495, 701496, 701505, 701506, 701507, 701508, 701509, 701510, 701511, 701512, 701513, 701514, 701528, 701529, 701530, 701532, 701537, 701540, 701542, 701546, 701547, 701548, 701549, 701550, 701551, 701552, 701553, 701554, 701555, 701556, 701557, 701558, 701559, 701560, 701561, 701563, 701564, 701572, 701573, 701575, 701586, 701587, 701588, 701589, 701590, 701591, 701592, 701594, 701595, 701596, 701597, 701598, 701599, 701600, 701601, 701603, 701605, 701606, 701607, 701611, 701612, 701629, 701630, 701631, 701632, 701633, 701634, 701635, 701636, 701637, 701639, 701640, 701641, 701642, 701644, 701645, 701658, 701659, 701660, 701662, 701665, 701666, 701668, 701670, 701671, 701672, 701673, 701674, 701675, 701681, 701683, 701694, 701696, 701697, 701698, 701699, 701700, 701701, 701702, 701703, 701704, 701705, 701706, 701707, 701708, 701709, 701710, 701711, 701712, 701713, 701714, 701715, 701716, 701717, 701718, 701719, 701720, 701721, 701722, 701723, 701724, 701725, 701726, 701727, 701728, 701733, 701734, 701736, 701737, 701738, 701740, 701741, 701742, 701743, 701745, 701746, 701747, 701748, 701750, 701752, 701753, 701754, 701755, 701756, 701757, 701759, 701760, 701761, 701762, 701763, 701764, 701769, 701770, 701771, 701772, 701773, 701774, 701775, 701777, 701778, 701779, 701780, 701781, 701782, 701783, 701784, 701785, 701787, 701788, 701792, 701801, 701806, 701807, 701808, 701809, 701810, 701811, 701812, 701813, 701814, 701815, 701816, 701817, 701818, 701819, 701820, 701837, 701838, 701839, 701841, 903622, 904622, 909622, 912622, 915622, 916622, 917622],
  portalDisplay: [310059, 310147, 310148, 310171, 310497, 310563, 310570, 408700, 410016, 410027, 410029, 410035, 410036, 410039, 410040, 410059, 410074, 410079, 410085, 410089, 410093, 410112, 410113, 410121, 410132, 410134, 410136, 410147, 410148, 410150, 410154, 410155, 410156, 410161, 410165, 410171, 410172, 410183, 410184, 410192, 410194, 410196, 410198, 410207, 410220, 410221, 410222, 410244, 410263, 410270, 410497, 410504, 410505, 410534, 410536, 410541, 410546, 410547, 410554, 410563, 410564, 410568, 410570, 410581, 410582, 410658, 410667, 410668, 410669, 410670, 410671, 410672, 410673, 410678, 410686, 410687, 410688, 410689, 410713, 410714, 410715, 410716, 410717, 410718, 410730, 410754, 410757, 410758, 410762, 410766, 410767, 410769, 410771, 410790, 410814, 410815, 410816, 410817, 410818, 410819, 410820, 410821, 410822, 410823, 410824, 410825, 410834, 410836, 410846, 410847, 410867, 410868, 410869, 410870, 410871, 410872, 410873, 410874, 410875, 410876, 410877, 410878, 410879, 410880, 410881, 410882, 410883, 410884, 410885, 410886, 410887, 410910, 410911, 410912, 410913, 410914, 410915, 410916, 410917, 410918, 410919, 410920, 410921, 410922, 410923, 410924, 410925, 510036, 510059, 510136, 510147, 510148, 510171, 510497, 510563, 510570, 610035, 610036, 610059, 610136, 610147, 610148, 610171, 610497, 610563, 610570, 701101, 701102, 701103, 701104, 701105, 701106, 701107, 701108, 701109, 701110, 701111, 701112, 701113, 701140, 701141, 701142, 701143, 701144, 701145, 701146, 701147, 701148, 701157, 701159, 701160, 701166, 701167, 701168, 701170, 701171, 701172, 701173, 701174, 701175, 701176, 701177, 701178, 701179, 701180, 701181, 701182, 701183, 701184, 701185, 701186, 701187, 701188, 701189, 701191, 701192, 701193, 701194, 701195, 701196, 701197, 701202, 701214, 701215, 701218, 701220, 701221, 701222, 701223, 701224, 701226, 701227, 701228, 701229, 701230, 701231, 701232, 701236, 701237, 701238, 701239, 701240, 701241, 701242, 701243, 701244, 701245, 701247, 701253, 701254, 701255, 701256, 701260, 701261, 701262, 701263, 701274, 701278, 701279, 701280, 701281, 701295, 701296, 701297, 701325, 701326, 701327, 701358, 701361, 701362, 701368, 701369, 701375, 701385, 701386, 701387, 701388, 701389, 701390, 701396, 701400, 701404, 701405, 701406, 701407, 701408, 701409, 701410, 701411, 701412, 701413, 701414, 701419, 701498, 701499, 701501, 701502, 701504, 701515, 701516, 701517, 701518, 701519, 701520, 701521, 701522, 701523, 701524, 701525, 701526, 701527, 701533, 701534, 701535, 701538, 701566, 701567, 701568, 701569, 701570, 701571, 701574, 701577, 701578, 701585, 701593, 701602, 701663, 701667, 701676, 701677, 701729, 701730, 701735, 701739, 701791, 701804, 701805, 701840, 701850, 701851, 701857, 701858, 701859, 701860],
  customerMarketing: [410242, 410265, 410567, 410576, 410665, 410666, 490610, 701162, 701163, 701164, 701165, 701267, 701294, 701357, 701381, 701382, 701383, 701384, 701391, 701392, 701393, 701394, 701395, 701397, 701398, 701401, 701497, 701531, 701536, 701539, 701541, 701580, 701581, 701582, 701583, 701624, 701649, 701650, 701651, 701652, 701653, 701654, 701655, 701656, 701657, 701732],
  naturalSearch: [410095, 410096, 410097, 410098, 410099, 410100, 410101, 410102, 410191, 701275, 701793, 701794, 701795, 701796, 701797, 701798],
  direct: [400000, 400009, 410013, 410015, 410021, 410022, 410028, 410032, 410048, 410049, 410053, 410054, 410058, 410075, 410084, 410087, 410103, 410127, 410133, 410138, 410153, 410163, 410177, 410467, 410468, 410469, 410470, 410471, 410472, 410556, 410773, 490100, 490104, 490588, 490596, 490603, 490604, 490605, 490606, 490607, 490608, 490618, 490620, 490621, 490622, 490628, 701246, 701257, 701258, 701259, 701268, 701332, 701776, 701802, 701803, 990487, 990593, 990594, 990596, 990603, 990604, 990605, 990606, 990607, 990608, 990620, 990621, 990628],
  social: [701845, 701846, 701847, 701848, 701849]
};

// Generated by CoffeeScript 1.9.3
var hasProp = {}.hasOwnProperty;

Realtime.establishChannels = function(ref) {
  var finalChannel, referringDomainChannel, sourceCodeChannel;
  sourceCodeChannel = 'Other';
  referringDomainChannel = 'Other';
  finalChannel = 'Other';
  ({
    establishChannelBySourceCode: (function(ref) {
      var i, len, ref1, ref2, scChannel, sourcecode;
      ref1 = Realtime.sourcecodes;
      for (scChannel in ref1) {
        if (!hasProp.call(ref1, scChannel)) continue;
        ref2 = Realtime.sourcecodes[scChannel];
        for (i = 0, len = ref2.length; i < len; i++) {
          sourcecode = ref2[i];
          if (ref.sourcecode === sourcecode) {
            return sourceCodeChannel = scChannel;
          }
        }
      }
    })(ref),
    establishChannelByReferringDomain: (function(ref) {
      var i, len, rdChannel, ref1, ref2, referringDomain;
      ref1 = Realtime.referringDomains;
      for (rdChannel in ref1) {
        if (!hasProp.call(ref1, rdChannel)) continue;
        ref2 = Realtime.referringDomains[rdChannel];
        for (i = 0, len = ref2.length; i < len; i++) {
          referringDomain = ref2[i];
          if (ref.referringDomain === referringDomain) {
            return referringDomainChannel = rdChannel;
          }
        }
      }
    })(ref)
  });
  if (sourceCodeChannel === 'paidSearch' || referringDomainChannel === 'paidSearch') {
    return finalChannel = 'paidSearch';
  } else if (sourceCodeChannel === 'programmaticsDisplay') {
    return finalChannel = 'programmaticsDisplay';
  } else if (sourceCodeChannel === 'acqEmail') {
    return finalChannel = 'acqEmail';
  } else if (sourceCodeChannel === 'acqEmail') {
    return finalChannel = 'acqEmail';
  } else if (sourceCodeChannel === 'b2bExperianMemb') {
    return finalChannel = 'b2bExperianMemb';
  } else if (sourceCodeChannel === 'partnership') {
    return finalChannel = 'partnership';
  } else if (sourceCodeChannel === 'portalDisplay') {
    return finalChannel = 'portalDisplay';
  } else if (sourceCodeChannel === 'customerMarketing') {
    return finalChannel = 'customerMarketing';
  } else if (sourceCodeChannel === 'naturalSearch' || referringDomainChannel === 'naturalSearch') {
    return finalChannel = 'naturalSearch';
  } else if (sourceCodeChannel === 'direct' || referringDomainChannel === 'direct') {
    return finalChannel = 'direct';
  } else {
    return finalChannel = 'Other';
  }
};
